# 4.5 Case Study: Small-World Phenomenon

## Introduction
The **small-world phenomenon** is the observation that, although individuals typically have relatively few acquaintances, there exists a short chain of connections linking any two people. To study such relationships, we use the mathematical model known as a **graph**, which captures pairwise connections among entities.

---

## Graph Terminology

A **graph** consists of a set of **vertices** and a set of **edges**.  
- Each **edge** represents a connection between two vertices.  
- Two vertices are **neighbors** if connected by an edge.  
- The **degree** of a vertex is the number of its neighbors.

Graphs model relationships across a wide range of systems:

| System | Vertices | Edges |
|:---|:---|:---|
| Circulatory | Organ | Blood vessel |
| Skeletal | Joint | Bone |
| Nervous | Neuron | Synapse |
| Social | Person | Relationship |
| Epidemiological | Person | Infection |
| Chemical | Molecule | Bond |
| N-body | Particle | Force |
| Genetic | Gene | Mutation |
| Biochemical | Protein | Interaction |
| Transportation | Intersection | Road |
| Internet | Computer | Cable |
| Web | Web page | Link |
| Distribution | Power station | Power line |
| Mechanical | Joint | Beam |
| Software | Module | Call |
| Financial | Account | Transaction |

---

## Graph Data Type and API

Graph-processing algorithms typically:
1. **Build** an internal representation by adding edges.
2. **Process** the graph by iterating over vertices and their adjacent vertices.

`Graph.java` implements this API using a **symbol table of sets**, where:
- Keys are vertices.
- Values are sets of neighboring vertices.

### Implementation Characteristics
- Efficient iteration over vertices.
- Efficient iteration over each vertex’s neighbors.
- Space usage proportional to the number of edges.

---

## Performer–Movie Graphs

A **performer–movie graph** includes a vertex for each performer and movie, with an edge connecting a performer to a movie if they appeared in it.  

### Example Data Files (from IMDb, Nov 2, 2006)

| File | Description | Movies | Actors | Edges |
|:---|:---|:---:|:---:|:---:|
| cast.06.txt | Movies released in 2006 | 8780 | 84236 | 103815 |
| cast.00-06.txt | Movies released since 2000 | 52195 | 348497 | 606531 |
| cast.G.txt | Movies rated G | 1288 | 21177 | 28485 |
| cast.PG.txt | Movies rated PG | 3687 | 74724 | 116715 |
| cast.PG13.txt | Movies rated PG-13 | 2538 | 70325 | 103265 |
| cast.mpaa.txt | Movies rated by MPAA | 21861 | 280624 | 627061 |
| cast.action.txt | Action movies | 14938 | 139861 | 266485 |
| cast.rated.txt | Popular movies | 4527 | 122406 | 217603 |
| cast.all.txt | 250,000+ movies | 285462 | 933864 | 3317266 |

Each file line lists a movie followed by performers separated by `/`.

---

## Inverted Index

`IndexGraph.java` implements an **inverted index** for movie data.  
- Given a movie name → prints all performers in that movie.  
- Given a performer name → prints all movies they’ve appeared in.

---

## Shortest Paths in Graphs

A **path** is a sequence of edges connecting two vertices.  
A **shortest path** is one with minimal length among all possible paths.

`PathFinder.java` computes shortest paths using **Breadth-First Search (BFS)**.

---

## Degrees of Separation

The **Kevin Bacon Game** illustrates the small-world concept using movies:
- Bacon number 0 → Kevin Bacon himself.  
- Bacon number 1 → Performers who appeared in a movie with him.  
- Bacon number 2 → Performers connected through another performer with Bacon number 1.  

Example using `PathFinder.java`:

```bash
% java PathFinder movies.txt "/" "Bacon, Kevin"
Kidman, Nicole
   Bacon, Kevin 
   Animal House (1978) 
   Sutherland, Donald (I) 
   Cold Mountain (2003) 
   Kidman, Nicole 
distance 2

Hanks, Tom
   Bacon, Kevin 
   Apollo 13 (1995)
   Hanks, Tom
distance 1
```

Most performers have a Kevin Bacon number ≤ 3, illustrating the **small-world phenomenon**.

---

## Small-World Graphs

**Small-world graphs** share three defining properties:

1. **Sparseness:** Few edges relative to total possible connections.  
2. **Short Average Path Lengths:** Random vertices are connected by short paths.  
3. **Local Clustering:** If vertices A and B are both neighbors of C, A and B are likely to be connected.

`SmallWorld.java` computes graph characteristics such as:
- Average degree  
- Average path length  
- Clustering coefficient

---

## Performer–Performer Graph

A **performer–performer graph** connects two performers if they appeared in the same movie.  
Unlike the bipartite movie–performer graph, this graph often **is** a small-world graph (after removing unconnected performers).

`Performer.java` builds such graphs and verifies the small-world property.

---

## Exercises

1. **Graph Enhancements**
   - Add `V()` and `E()` methods in `Graph.java` to return the number of vertices and edges.
   - Add `degree(String v)` to return the degree of vertex `v` (e.g., find the performer with most movie appearances).  
   - Add `hasVertex(String v)` to check if a vertex exists.  
   - Add `hasEdge(String v, String w)` to check if two vertices are connected.

2. **Breadth-First Search (BFS) Question**
   - *True or False:* During BFS, can the queue contain two vertices with distances 7 and 9?  
     - **Answer:** False — the queue contains vertices of at most two distances `d` and `d + 1`.

3. **Stack Instead of Queue in BFS**
   - Would BFS still compute paths correctly?  
     - **Answer:** Yes, it finds paths, but **no**, they are not shortest paths.

4. **Queue Instead of Stack in pathTo()**
   - Effect: The vertices would be returned **in reverse order**.

---

## Summary

The **small-world phenomenon** shows that large, complex networks — social, biological, or technological — often exhibit surprising connectivity.  
Through **graph models**, **BFS**, and **data from movies and actors**, we observe that even vast networks are connected by short paths, validating the “six degrees of separation” principle.
